<!doctype html>
<html lang="de">
<head>
	<meta charset="utf-8">
	<title>Metamorph-Datenmodell</title>
</head>

<body>
<h1>Das Metamorph-Datenmodell</h1>

<p>Bevor wir uns in die Programmierung mit Metamorph stürzen können, müssen wir uns zunächst mit dem Datenmodel befassen, das hinter Metamorph steckt.
</p>

<p>Es ist eine wichtige Eigenschaft von Metamorph, dass es nicht auf die Verarbeitung eines bestimmten Datenformats wie etwa XML, Pica+, MARC21 oder JSON beschränkt ist, sondern dass beliebige semistrukturierte Datenformate verarbeitet werden können. Damit dies funktioniert, definiert Metamorph ein generisches Datenmodell.
</p>

<p>Wie sieht dieses generische Datenmodell aus? Wir nehmen als Beispiel bibliografische Informationen. Nehmen wir also an, wir haben folgende Informationen zu einem Buchtitel:
</p>

<p>Kinder- und Hausmärchen<br>
von Jacob Grimm, Wilhelm Carl Grimm<br>
Heinz Rölleke (Hrsg.)<br>
Vandenhoeck und Ruprecht, Göttingen 1986<br>
978-3-525-20764-2
</p>

<p>Um diese Informationen in Metamorph verarbeiten zu können, müssen sie in eine strukturierte Form gebracht werden. Die Grundlage für die Datenverarbeitung in Metamorph sind Datensätze. Die Informationen über einen Buchtitel können als so ein Datensatz betrachtet werden. In diesem Datensatz müssen die Informationen so abgelegt werden, dass wir einzele Teile benennen und auf diese Weise adressieren können. Im Metamorph-Datenmodell werden dazu sogenannte<i>Literale</i> gebildet. Dies sind einfache Schlüssel-Wert-Paare. Der Schlüssel ist der Name der Information, die als Datenwert verwendet wird. Das Datenmodell macht dabei keine Vorgaben oder Einschränkungen für die Namen der Schlüssel. Die Namen können völlig frei gewählt werden.
</p>

<p>Das Metamorph-Datenmodell sieht außerdem vor, dass Datensätze einen Identifikator haben. Dieser wird in Metamorph meist als <i>Datensatz-ID</i> bezeichnet und ist ein beliebiger Datenwert, der geeignet ist, einen Datensatz möglichst eindeutig zu bezeichnen. Mögliche Identifikatoren wären etwa URLs, ID-Nummern oder die ISBN-Nummer aus dem obigen Beispiel. Auch wenn es meist sinnvoll ist, einen eindeutigen Identifikator für jeden Datensatz zu verwenden, erzwingt das Datenmodell dies nicht. Du kannst also auch einfach ein und denselben Wert oder sogar eine leere Zeichenfolge als Identifikator für alle Datensätze zu nutzen. Der verwendete Datenwert kann, muss aber nicht, zusätzlich auch als Literal im Datensatz enthalten sein, wie das Beispiel zeigt.</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	authors: Jacob Grimm, Wilhelm Carl Grimm
	editor: Heinz Rölleke
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2
</pre>

<p>Dies ermöglicht es bereits viele Arten von Informationen zu erfassen. Das Beispiel zeigt aber auch, dass die Literale allein einige Informationen nur sehr grob strukturiert erfassen. So sind alle Autoren in einem Literal enthalten und die Adressierung eines einzelen Autors ist nicht möglich. Im Metamorph-Datenmodell wird dieses Problem gelöst, dadurch dass Literale beliebig oft in einem Datensatz wiederholt werden können:
</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	author: Jacob Grimm
	author: Wilhelm Carl Grimm
	editor: Heinz Rölleke
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2
</pre>

<p>Die Literale eines Datensatzes werden im Datenmodell als geordnete Menge aufgefasst. Die Reihenfolge der beiden author-Literale ist also nicht zufällig, sondern wohldefiniert und kann daher bedeutungstragend verwendet werden. Dies erlaubt es bspw. Erst- und Zweitautor zu unterscheiden, obwohl beide in einem Literal gleichen Namens abgelegt sind.
</p>

<p>An dieser Stelle sei angemerkt, dass das Metamorph-Datenmodell keine Listen- oder Array-Strukturen kennt. Solche Strukturen werden einfach durch wiederholte Literale gleichen Namens abgebildet.
</p>

<p>Bisher haben wir nur den Datensatz als Element zum Zusammenfassen von Daten kennengelernt. Durch die Wiederholbarkeit der Literale entsteht allerdings oftmals der Bedarf, Literale auch innerhalb eines Datensatz zu gruppieren, um ihre Zusammengehörigkeit auszudrücken.
</p>

<p>Angenommen wir wollen die Namen unserer Autoren in ihre einzelnen Bestandteile zerlegt im Datensatz ablegen. Mit dem bisher Vorgestellten sieht dies so aus:
</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	authorSurname: Grimm
	authorForename: Jacob
	authorSurname: Grimm
	authorForename: Wilhelm
	authorForename: Carl
	editorSurname: Rölleke
	editorForename: Heinz
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2
</pre>

<p>Im Vergleich zu den vorangegangenen Beispielen ist unser Datensatz durch die Aufspaltung der Namen ziemlich unübersichtlich geworden. Es ist kaum noch ersichtlich, welcher Vor- und Nachname zusammen gehören. So können z. B. Autoren und Herausgeber nur noch auseinander gehalten werden, weil die Literale unterschiedliche Namen verwenden. Diese Lösung ist allerdings nicht besonders übersichtlich und auch nicht immer möglich. Wenn die Literalnamen bspw. vorgegeben sind (Gründe dafür werden wir in Abschnitt XX kennenlernen), dann kann es sein, dass vorgegebenen Literalnamen für die Namensteile nicht zwischen Autorennamen und Herausgebernamen unterscheiden, sondern nur allgemein Vor- und Nachnamen beschreiben. Dann ist keine Unterscheidung zwischen Autoren- und Herausgebernamen mehr möglich. Im Metamorph-Datenmodell können deshalb Literale innerhalb eines Datensatzes gruppiert werden. Diese Gruppen werden <i>Entitäten</i> genannt und habe ebenso wie Literale einen beliebigen Namen, um sie adressieren und die gruppierten Inhalte unterscheiden zu können.
</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	author:
		surname: Grimm
		forename: Jacob
	author:
		surname: Grimm
		forename: Wilhelm
		forename: Carl
	editor:
		surname: Rölleke
		forename: Heinz
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2
</pre>

<p>Die Entitäten sind hier in der Darstellung durch Einrückungen gekennzeichnet. Du kannst dir Entitäten als eine Art von Literal mit komplexem strukturierten Inhalt oder als eine Art Datensatz im Datensatz vorstellen.
</p>

<p>Die Reihenfolge der Entitäten im Datensatz wird gemeinsam mit der Reihenfolge der Literale berücksichtigt. Es ist außerdem zulässig, denselben Namen einmal für ein Literal anschließend für eine Entität zu verwenden.
</p>

<p>Entitäten können nicht nur auf Datensatzebene zur Gruppierung von Entitäten verwendet werden, sondern auch innerhalb von Entitäten. Wenn wir bspw. für jedem Autor auch noch Informationen zu seiner Institution ablegen wollen, können wir die Informationen zur Institution in einer verschachtelten Entität ablegen, um sie zusammenzufassen:
</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	author:
		surname: Grimm
		forename: Jacob
		affiliation:
			institution: Friedrich-Wilhelms Universität zu Berlin
			country: Preußen
	author:
		surname: Grimm
		forename: Wilhelm
		forename: Carl
		affiliation:
			institution: Universität Göttingen
			country: Königreich Hannover
	editor:
		surname: Rölleke
		forename: Heinz
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2
</pre>

<p>Auf diese Weise lassen sich mit Entitäten auch komplexe hierarchische Datensatzstrukturen abbilden.
</p>

<p>Wir haben jetzt alle Strukturelemente des Metamorph-Datenmodells kennengelernt. Diese sind im Folgenden noch einmal kurz zusammengefasst:
</p>

<ul>
	<li>Das grundlegende Strukturelement sind <strong>Literale</strong>. Sie erlauben es einen Datenwert mit einem Namen zu versehen. Damit wird deutlich, welche Bedeutung der Datenwert hat und man kann ihn adressieren.</li>

	<li>Um komplexere Strukturen modellieren zu können, gibt es <strong>Entitäten</strong>. Entitäten fassen mehrere Literale und auch andere Entitäten zusammen. Sie sind ebenso wie Literale benannt, um die Bedeutung der in der Entität enthaltenen Literale und Entitäten auszudrücken und sie adressierbar zu machen.</li>

	<li>Der <strong>Datensatz</strong> ist das äußerste Strukturelement des Metamorph-Datenmodells. Er fasst Entitäten und Literale zusammen. Um den Datensatz identifizieren zu können kann er mit einer Datensatz-ID versehen werden, die quasi als Name des Datensatzes fungiert.</li>
</ul>

<p>Es fällt auf, dass die Beschreibung der Funktion der Entitäten und des Datensatzes sehr ähnlich ist. In der Tat ist es so, dass sich der Datensatz von der Entität strukturell nur dadurch unterscheidet, dass er die äußere Hülle der Datenstruktur bildet. Es ist daher problemlos möglich einen Datensatz in einen anderen als Entität einzubetten oder eine Entität aus einem Datensatz herauszuziehen und als eigenen Datensatz zu betrachten. Dabei sollte nur beachtet werden, dass sowohl Datensatz-ID als auch Entitätsname zwar beliebige Werte annehmen können, die ihnen zugeschriebene Bedeutung aber leicht unterschiedlich ist. Während die Datensatz-ID einen konkreten Datensatz bezeichnet und sich von Datensatz zu Datensatz unterscheidet, dient der Entitätsname der Identifikation einer Entität in der Datensatzstruktur und er ist bei jedem Datensatz gleich. Aus diesem Grund ist es sinnvoll, beim Umwandeln eines Datensatzes in eine Entität nicht die Datensatz-ID als Entitätsname zu verwenden, sondern einen festen Namen. Andersherum sollte beim Herauslösen eines Datensatzes eine ID generiert werden, statt einfach den Entitätsnamen zu verwenden.
</p>

<p>Am Beispiel unseres Buchtitels können wir das Problem leicht nachvollziehen. Ich habe für das Beispiel die Entitäten mit den Angaben zu den Autoren und dem Herausgeber aus dem Titeldatensatz herausgezogen und als gesonderte Personendatensätze dargestellt. Dabei habe ich die Entitätsnamen einfach als Datensatz-IDs verwendet.
</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2

Datensatz mit ID author:
	surname: Grimm
	forename: Jacob
	affiliation:
		institution: Friedrich-Wilhelms Universität zu Berlin
		country: Preußen
		
Datensatz mit ID author:
	surname: Grimm
	forename: Wilhelm
	forename: Carl
	affiliation:
		institution: Universität Göttingen
		country: Königreich Hannover
		
Datensatz mit ID editor:
	surname: Rölleke
	forename: Heinz
</pre>

<p>Das Ergebnis zeigt, dass wir zwei Datensätze mit der ID author haben, sodass wir die Datensätze nicht mehr eindeutig identifizieren können. Ein weiterer Nachteil dieses Vorgehens ist, dass die Personen nun fest als Autoren oder Herausgeber benannt werden, obwohl das eine Eigenschaft ist, die sie eigentlich nur im Zusammenhang mit einem Buch besitzen. Es ist ja durchaus möglich, dass etwa Jacob Grimm bei einem Buch Autor und bei einem anderen Herausgeber war. 
</p>

<p>Um diese Probleme zu vermeiden, ist es sinnvoll, beim Herauslösen der Personendatensätze die Entitätsnamen durch eindeutige Bezeichner zu ersetzen. Dies erlaubt es uns dann nämlich auch in dem Titeldatensatz auf diese Datensätze zu verweisen und Jacob und Wilhelm Grimm so als Autoren und Heinz Rölleke als Herausgeber zu identifizieren.</p>

<pre>
Datensatz mit ID 978-3-525-20764-2:
	title: Kinder- und Hausmärchen
	authorId: 1
	authorId: 2
	editorId: 3
	publicationYear: 1986
	publisher: Vandenhoeck und Ruprecht
	location: Göttingen
	isbn: 978-3-525-20764-2

Datensatz mit ID 1:
	surname: Grimm
	forename: Jacob
	affiliation:
		institution: Friedrich-Wilhelms Universität zu Berlin
		country: Preußen
		
Datensatz mit ID 2:
	surname: Grimm
	forename: Wilhelm
	forename: Carl
	affiliation:
		institution: Universität Göttingen
		country: Königreich Hannover
		
Datensatz mit ID 3:
	surname: Rölleke
	forename: Heinz
</pre>

<p>Bei den Literalen mit den namen authorId und editorId handelt es sich um ganz normale Literale. Es liegt in den Händen des Anwenders, die Datenwerte dieser Literale als Verweise auf andere Datensätze zu interpretieren. Das Metamorph-Modell kennt kein besonderes Strukturelement für Verknüpfungen.</p>

<p>TODO: Allgemeines Modell für semistrukturierte Daten beschreiben?
</p>

<h1>Literal- und Entitätsnamen</h1> 

<p>Bei der Einführung der Literale habe ich bereits kurz erwähnt, dass die Literalnamen völlig beliebig sein können und dass das Metamorph-Datenmodell keinerlei Vorgaben macht, wie Namen für Literale und Entitäten zu gestalten sind. Dies ist eine wichtige Eigenschaft des Datenmodells. Es definiert nur die verfügbaren Strukturelemente (Literale und Entitäten), aber nicht wie diese kombiniert und benannt werden müssen, um Daten aus einem bestimmten Anwendungsbereich (bspw. bibliothekarische Titelaufnahmen) zu beschreiben. Dies kann je Art der Daten völlig unterschiedlich sein und ermöglicht es, Metamorph für die Verarbeitung von Daten aus verschiedensten Anwendungsbereichen einzusetzen. Voraussetzung ist nur, dass sich die Daten in einer hierarchischen Datenstruktur mit Schlüssel-Wert-Paaren abbilden lassen. 
</p>

<p>Das ist dieselbe Idee, die auch XML zugrunde liegt: Es wird eine allgemeine Struktur vorgegeben, die konkrete Ausprägung bleibt aber dem Anwender überlassen, sodass eine Nutzung in unterschiedlichsten Anwendungsbereichen möglich ist.
</p>

<p>Je nach Anwendungsfall können Literal- und Entitätsnamen ganz unterschiedlich gewählt werden. In dem Beispiel im vorigen Abschnitt habe ich einfache sprechende Namen gewählt, damit die Beispiele leicht verständlich sind. Wenn allerdings Daten verarbeitet werden sollen, die bereits in einem bestimmten domänenspezifischen Format vorliegen ist es meist sinnvoll, die Benennung und Strukturvorgaben dieses Formats zu übernehmen. So bleibt die ursprüngliche Bedeutung der Daten erhalten, trotzdem können sie aber mit Metamorph verarbeitet werden.
</p>

<p>TODO: Datenformate vorziehen? Formatdarstellungen erst danach?
</p>

<h2>Darstellung von PICA+ im Metamorph-Datenmodell</h2>

<p>Einer der ersten Anwendungsfälle von Metamorph war die Konversion von bibliothekarischen Daten, die im PICA+ Format vorlagen. Dieses Datenformat ist recht einfach strukturiert. Es gibt Datensätze, die jeweils bspw. einen Buchtitel oder eine Zeitschrift beschreiben. Ein Datensatz setzt sich aus sogenannten Feldern zusammen, die Angaben zu bestimmten Aspekten des beschriebenen Objekts enthalten. Da die Angaben oftmals noch eine feinere Untergliederung aufweisen, bestehen die Felder aus Unterfeldern. Felder und Unterfelder können wiederholbar sein. Bei gleichnamigen Feldern garantiert PICA+ keine bestimmte Reihenfolge dieser Felder. Wenn dies Notwendig ist, kann der Feldname um eine sogenannte <i>Occurrence</i> ergänzt werden. Dabei handelt es sich um einen Index, der an den Feldnamen angehängt wird und die Position des Feldes beschreibt.
</p>

<p>Das folgende Beispiel zeigt einen Auschnitt aus einem Datensatz im PICA+ Format. Die ersten vier Zeichen in jeder Zeile bezeichnen den Feldnamen, eine ggf. vorhandene <i>Occurrence</i> besteht aus zwei Ziffern, die mit einem Schrägstrich vom Feldnamen abgetrennt sind. Das $-Zeichen trennt die einzelnen Unterfelder in einem Datenfeld ab. Das erste Zeichen hinter dem $-Zeichen ist der Name des Unterfelds, die restlichen Zeichen sind der eigentliche Inhalt des Unterfelds:
</p>

<pre>
003@ $0123
021A $0
028A/01
028A/02
</pre>

<p>Um diesen Datensatz mit Metamorph verarbeiten zu können, müssen wir die Feld-Unterfeld-Struktur des PICA+ Formats mit den Strukturelementen des Metamorph-Datenmodells nachbilden. Das PICA+ Format besitzt drei Strukturelemente: Datensatz, Feld und Unterfeld. Diese Elemente können wie folgt auf das Metamorph-Datenmodell abgebildet werden:
</p>

<ul>
	<li>Der <strong>PICA+ Datensatz</strong> findet eine direkte Entsprechung im Datensatz des Metamorph-Datenmodells. Als Datensatz-Identifikator kann der Inhalt des Unterfelds 003@$0 verwendet werden. In diesem Unterfeld steht bei PICA+ gängigerweise eine eindeutige Datensatznummer.</li>

	<li>Ein <strong>PICA+ Feld</strong> hat einen Namen und gruppiert ein oder mehrere Unterfelder. Dies können wir mit einer Entität nachbilden. Die ggf. vorhandenen Angaben zu <i>Occurrences</i> benötigen wir nicht, da die Reihenfolge der Entitäten im Metamorph-Datenmodell immer beachtet wird. Wir betrachten die <i>Occurrence</i> daher einfach als Teil des Feldnamens. Alternativ wäre es auch möglich, sie vom Feldnamen abzuschneiden und zu verwerfen.</li>
	
	<li>Ein <strong>Unterfeld</strong> ist einfach ein Pärchen von Namen und Datenwert, wir können es also einfach als ein Literal darstellen.</li>
</ul>

<p>Im Metamorph-Datenmodell sieht der obige Datensatz dann so aus: 
</p>

<pre>
Datensatz mit ID 123:
	003@:
		0: 123
	021A:
		0: Titel
</pre>

<p>Das Beispiel zeigt, dass sich außer den Strukturelementen zur Gliederung des Datensatzes durch die Umwandlung ins Metamorph-Datenmodell nichts an dem Datensatz geändert hat, was seine Bedeutung verändert.</p>

<h2>Darstellung von JSON im Metamorph-Datenmodell</h2>

<h2>Darstellung von XML im Metamorph-Datenmodell</h2>

<h1>Datenformate</h1> 

<p>Neben der Trennung von Struktur und Semantik ist die zweite wichtige Eigenschaft des Metamorph-Datenmodells, dass es kein konkretes Format für die Darstellung und Ablage von Daten definiert. Der Grund dafür ist, dass sich die Datenformate in verschiedenen Anwendungsdomänen häufig stark unterscheiden. Um mit unterschiedlichen Datenformaten arbeiten zu können, definiert Metamorph nur eine Schnittstelle für das Empfangen und Senden von Datensätzen, die gemäß des Metamorph-Datenmodells strukturiert sind. Die Konstruktion dieser Datensätze aus konkreten Datenformaten ist aber in spezielle Dekodier- und Enkodiermodule ausgelagert, die unabhängig von Metamorph sind.
</p>

<p>Das Metamorph-Datenmodell geht also davon aus, dass für die Arbeit mit Daten drei Dinge notwendig sind:
</p>

<ol>
    <li>Das Datenformat: in welcher Form werden die Daten abgespeichert, eingegeben oder angezeigt?</li>
    <li>Die Datenstruktur: welche Möglichkeiten gibt es zur Strukturierung der Daten?</li>
    <li>Das Vokabular: wie sind einzelne Datenelemente benannt und wie werden sie konkret strukturiert?</li>
</ol>

<p>Diese Trennung der verschiedenen Aspekte der Datenbeschreibung findet sich in RDF wieder. RDF kann in verschiedenen Formaten serialisiert werden (u.a. RDF-XML und Turtle), es definiert eine allgemeine Datenstruktur (das RDF-Graphmodell) und es gibt Vokabulare bzw. Ontologien, die konkrete Namen und Strukturen definieren, um Domänenwissen in RDF zu beschreiben.
</p>

<p>Im Gegensatz zu RDF verwendet Metamorph ein etwas einfacheres Datenmodell und behält das Konzept des Datensatzes bei, dass es in RDF so nicht mehr gibt. Der Grund dafür ist, das sich in der täglichen Arbeit mit Daten zeigt, dass diese häufig in einer wohldefinierten Zusammenstellung benötigt werden und nicht nur in einem weitläufigen Netz.
</p>

<p>Es gibt ein Standardmodell für semistrukturierte Daten, den sogenannten Edge-labelled Graph. ... xml implementiert ihn so rdf so ... Im Metamorph-Datenmodell verwenden wir eine vereinfachte Version des Standardmodells.
</p>

- Fehlen von Verknüpfungen und Provenienzinformationen
- Keine Typinformationen. Everything is a string

<h1>Zusammenfassung</h1>

<ol>
    <li>Einfache Datenwerte werden als &ndash; Literale genannte &ndash; Schlüssel-Wert-Paare dargestellt.</li>
    <li>Literale können wiederholt werden. Im Datenmodell ist festgelegt, dass Literallisten geordnet sind.</li>
    <li>Komplexe Informationen werden mit Entitäten dargestellt. Eine Entität ist eine geordnete und benannte Menge von Literalen und anderen Entitäten.</li>
    <li>Komplexe Informationen werden mit Entitäten dargestellt. Eine Entität ist eine geordnete und benannte Menge von Literalen und anderen Entitäten.</li>
    <li>Literal- und Entitätsnamen sind nicht vergegeben. Es können beliebige Texte verwendet werden. Das Metamorph-Datenmodell legt nur die Struktur der Daten fest. Es macht keine Vorgaben zu dem verwendeten Vokabular.</li>
</ol>

</body>
</html>
